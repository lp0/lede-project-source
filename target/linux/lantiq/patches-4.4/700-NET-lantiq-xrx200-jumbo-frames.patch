--- a/drivers/net/ethernet/lantiq_xrx200.c	2017-03-01 17:02:13.000000000 +0000
+++ b/drivers/net/ethernet/lantiq_xrx200.c	2017-03-01 17:15:36.000000000 +0000
@@ -54,14 +54,19 @@
 #define XRX200_HEADROOM		4
 
 #define XRX200_TX_TIMEOUT	(10 * HZ)
 
+/* allowed jumbo packet length [1500 +] n
+ * (where 0 <= n <= 1028, without VLAN tags)
+ */
+#define XRX200_JUMBO_LEN	8
+
 /* port type */
 #define XRX200_PORT_TYPE_PHY	1
 #define XRX200_PORT_TYPE_MAC	2
 
 /* DMA */
-#define XRX200_DMA_DATA_LEN	0x600
+#define XRX200_DMA_DATA_LEN	(0x600 + XRX200_JUMBO_LEN)
 #define XRX200_DMA_IRQ		INT_NUM_IM2_IRL0
 #define XRX200_DMA_RX		0
 #define XRX200_DMA_TX		1
 #define XRX200_DMA_TX_2		3
@@ -1561,13 +1566,16 @@
 		ltq_switch_w32_mask(0, 0x01, SDMA_PCTRLx(i));
 		ltq_switch_w32_mask(0, PCE_INGRESS, PCE_PCTRL_REG(i, 0));
 	}
 
+	/* allow jumbo frames on all ports */
+	for (i = 0; i < 7; i++)
+		ltq_switch_w32_mask(0, BIT(3), MAC_CTRL_REG(i, 2));
+
 	/* enable special tag insertion on cpu port */
 	ltq_switch_w32_mask(0, 0x02, FDMA_PCTRLx(6));
 	ltq_switch_w32_mask(0, PCE_INGRESS, PCE_PCTRL_REG(6, 0));
-	ltq_switch_w32_mask(0, BIT(3), MAC_CTRL_REG(6, 2));
-	ltq_switch_w32(1518 + 8 + 4 * 2, MAC_FLEN_REG);
+	ltq_switch_w32(8 + VLAN_ETH_FRAME_LEN + XRX200_JUMBO_LEN + VLAN_HLEN * 2, MAC_FLEN_REG);
 	xrx200sw_write_x(1, XRX200_BM_QUEUE_GCTRL_GL_MOD, 0);
 
 	for (i = 0; i < XRX200_MAX_VLAN; i++)
 		hw->vlan_vid[i] = i;
@@ -1659,16 +1668,24 @@
 	/* store the port id in the hw struct so we can map ports -> devices */
 	priv->hw->port_map[p->num] = priv->hw->num_devs;
 }
 
+static int xrx200_change_mtu(struct net_device *dev, int new_mtu)
+{
+        if (new_mtu < 68 || new_mtu > ETH_DATA_LEN + XRX200_JUMBO_LEN)
+                return -EINVAL;
+        dev->mtu = new_mtu;
+        return 0;
+}
+
 static const struct net_device_ops xrx200_netdev_ops = {
 	.ndo_init		= xrx200_init,
 	.ndo_open		= xrx200_open,
 	.ndo_stop		= xrx200_close,
 	.ndo_start_xmit		= xrx200_start_xmit,
 	.ndo_set_mac_address	= eth_mac_addr,
 	.ndo_validate_addr	= eth_validate_addr,
-	.ndo_change_mtu		= eth_change_mtu,
+	.ndo_change_mtu		= xrx200_change_mtu,
 	.ndo_get_stats		= xrx200_get_stats,
 	.ndo_tx_timeout		= xrx200_tx_timeout,
 };
 
